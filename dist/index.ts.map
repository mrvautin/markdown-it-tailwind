{"version":3,"file":"index.ts","sources":["../src/index.ts"],"sourcesContent":["import MarkdownIt, { StateCore, Token } from \"markdown-it\";\n\nconst moduleDefaults: Options = {\n  classAttribute: \"class\",\n  styles: {\n    h1: \"text-5xl\",\n    h2: \"text-4xl\",\n    h3: \"text-3xl\",\n    h4: \"text-2xl\",\n    h5: \"text-xl\",\n    h6: \"text-lg\",\n  },\n};\n\nlet defaults;\n\nconst markdownItTailwind = (md: MarkdownIt, opts: Options) => {\n  defaults = Object.assign({}, moduleDefaults, opts);\n  md.core.ruler.push(\"markdownItTailwind\", processElement);\n};\n\nconst getStyle = (token: Token) => {\n  return defaults.styles[token.tag] || \"\";\n};\n\nconst addStyle = (token: Token) => {\n  // If there are inline tokens with children, loop them\n  if (token.children && token.children.length > 0) {\n    for (const child of token.children) {\n      const style = getStyle(child);\n      if (style) {\n        setStyle(style, child);\n      }\n    }\n  } else {\n    // Set single token\n    const style = getStyle(token);\n    if (style) {\n      setStyle(style, token);\n    }\n  }\n};\n\n// Set the class attribute\nconst setStyle = (style: string, token: Token) => {\n  if (token.attrGet(defaults.classAttribute)) {\n    style = \";\" + style;\n    token.attrJoin(defaults.classAttribute, style);\n  } else {\n    token.attrPush([defaults.classAttribute, style]);\n  }\n};\n\n// Process the element/token\nfunction processElement(state: StateCore) {\n  state.tokens.forEach((token) => {\n    if (\n      /_open$/.test(token.type) ||\n      token.type === \"fence\" ||\n      token.type === \"inline\"\n    ) {\n      addStyle(token);\n    }\n  });\n}\n\nexport interface Options { \n  styles: any,\n  classAttribute: string;\n}\n\nexport default markdownItTailwind;\n"],"names":[],"mappings":"AAEA,MAAM,cAAc,GAAY;AAC9B,IAAA,cAAc,EAAE,OAAO;AACvB,IAAA,MAAM,EAAE;AACN,QAAA,EAAE,EAAE,UAAU;AACd,QAAA,EAAE,EAAE,UAAU;AACd,QAAA,EAAE,EAAE,UAAU;AACd,QAAA,EAAE,EAAE,UAAU;AACd,QAAA,EAAE,EAAE,SAAS;AACb,QAAA,EAAE,EAAE,SAAS;AACd,KAAA;CACF,CAAC;AAEF,IAAI,QAAQ,CAAC;AAEb,MAAM,kBAAkB,GAAG,CAAC,EAAc,EAAE,IAAa,KAAI;IAC3D,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC;IACnD,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,oBAAoB,EAAE,cAAc,CAAC,CAAC;AAC3D,EAAE;AAEF,MAAM,QAAQ,GAAG,CAAC,KAAY,KAAI;IAChC,OAAO,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;AAC1C,CAAC,CAAC;AAEF,MAAM,QAAQ,GAAG,CAAC,KAAY,KAAI;;AAEhC,IAAA,IAAI,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AAC/C,QAAA,KAAK,MAAM,KAAK,IAAI,KAAK,CAAC,QAAQ,EAAE;AAClC,YAAA,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI,KAAK,EAAE;AACT,gBAAA,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;aACxB;SACF;KACF;SAAM;;AAEL,QAAA,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAI,KAAK,EAAE;AACT,YAAA,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACxB;KACF;AACH,CAAC,CAAC;AAEF;AACA,MAAM,QAAQ,GAAG,CAAC,KAAa,EAAE,KAAY,KAAI;IAC/C,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;AAC1C,QAAA,KAAK,GAAG,GAAG,GAAG,KAAK,CAAC;QACpB,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;KAChD;SAAM;QACL,KAAK,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC,CAAC;KAClD;AACH,CAAC,CAAC;AAEF;AACA,SAAS,cAAc,CAAC,KAAgB,EAAA;IACtC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,KAAI;AAC7B,QAAA,IACE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YACzB,KAAK,CAAC,IAAI,KAAK,OAAO;AACtB,YAAA,KAAK,CAAC,IAAI,KAAK,QAAQ,EACvB;YACA,QAAQ,CAAC,KAAK,CAAC,CAAC;SACjB;AACH,KAAC,CAAC,CAAC;AACL;;;;"}